import{c as r,a as d}from"./constants-C12GV1x6.js";async function c(t){const o=localStorage.getItem("accessToken"),a=await fetch(`${r}/${t}`,{method:"GET",headers:{"Content-Type":"application/json","X-Noroff-API-Key":d,Authorization:`Bearer ${o}`}});if(!a.ok){const n=await a.json();throw new Error(n.message||"Failed to fetch post data")}return(await a.json()).data}async function l(t,o){const a=localStorage.getItem("accessToken"),e=await fetch(`${r}/${t}`,{method:"PUT",headers:{"Content-Type":"application/json","X-Noroff-API-Key":d,Authorization:`Bearer ${a}`},body:JSON.stringify(o)});if(!e.ok){const s=await e.json();throw new Error(s.message||"Failed to update post")}return await e.json()}function f(t){window.location.href=`/post/edit/?id=${t}`}document.addEventListener("DOMContentLoaded",m);async function m(){const t=i();if(!t){alert("No post ID provided."),redirectToProfilePage();return}try{const a=await c(t);u(a)}catch(a){console.error("Error fetching post data:",a),alert("Failed to load post data."),redirectToProfilePage()}document.getElementById("edit-post-form").addEventListener("submit",g)}function i(){return new URLSearchParams(window.location.search).get("id")}function u(t){document.getElementById("title").value=t.title||"",document.getElementById("body").value=t.body||"",document.getElementById("tags").value=t.tags&&t.tags.join(", ")||"",document.getElementById("media-url").value=t.media&&t.media.url||"",document.getElementById("media-alt").value=t.media&&t.media.alt||""}async function g(t){t.preventDefault();const o=i();if(!o){alert("No post ID provided.");return}const a={title:document.getElementById("title").value.trim(),body:document.getElementById("body").value.trim(),tags:document.getElementById("tags").value.split(",").map(e=>e.trim()).filter(e=>e),media:{url:document.getElementById("media-url").value.trim(),alt:document.getElementById("media-alt").value.trim()}};try{const e=await l(o,a);alert("Post updated successfully!"),window.location.href="/profile/"}catch(e){console.error("Error updating post:",e),alert(`Failed to update post: ${e.message}`)}}export{f as n};
