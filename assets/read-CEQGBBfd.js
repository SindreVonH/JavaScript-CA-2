import{a as h,c as p,d}from"./constants-C12GV1x6.js";async function u(n=12,a=1,o){try{const r=localStorage.getItem("apiKey")||h,s=localStorage.getItem("accessToken");let t=`${p}?limit=${n}&page=${a}`;const i={"X-Noroff-API-Key":r,Authorization:`Bearer ${s}`,"Content-Type":"application/json"},e=await fetch(t,{method:"GET",headers:i});if(!e.ok){const c=await e.json();throw new Error(c.message||"Failed to fetch posts.")}return await e.json()}catch(r){throw console.error("Error in readPosts:",r),r}}async function g(n,a={}){try{const o=localStorage.getItem("apiKey")||h,r=localStorage.getItem("accessToken");let s=`${p}/${n}`;const t=[];a.includeAuthor&&t.push("_author=true"),a.includeComments&&t.push("_comments=true"),a.includeReactions&&t.push("_reactions=true"),t.length>0&&(s+=`?${t.join("&")}`);const i={"X-Noroff-API-Key":o,Authorization:`Bearer ${r}`,"Content-Type":"application/json"},e=await fetch(s,{method:"GET",headers:i});if(console.log("Read Single Post API response status:",e.status),!e.ok){const c=await e.json();throw new Error(c.message||"Failed to fetch the post.")}const l=await e.json();return console.log("Single post fetched successfully:",l),l}catch(o){throw console.error("Error in readPost:",o),o}}async function m(n,a=12,o=1,r){try{const s=localStorage.getItem("apiKey")||h,t=localStorage.getItem("accessToken");if(!n)throw new Error("Username is required to fetch posts.");let i=`${d}/${encodeURIComponent(n)}/posts?limit=${a}&page=${o}`;const e=await fetch(i,{method:"GET",headers:{"X-Noroff-API-Key":s,Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!e.ok){const c=await e.json();throw console.error("Failed to fetch user's posts:",c),new Error(c.message||"Failed to fetch user's posts.")}return await e.json()}catch(s){throw s}}export{g as a,m as b,u as r};
