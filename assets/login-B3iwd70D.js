import{A as c,a as l}from"./constants-C12GV1x6.js";import{h as d}from"./headers-BWZGllXf.js";async function f(a){try{const e=await fetch(`${c}`,{method:"POST",headers:{...d(),"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok){const s=await e.json();throw console.error("Login failed:",s),new Error(s.message||"Login failed")}return await e.json()}catch(e){throw e}}async function m(a){a.preventDefault();const e=a.target,t=e.querySelector("button[type='submit']");t.disabled=!0,t.textContent="Logging in...";const s=e.email.value.trim(),r=e.password.value.trim(),n={email:s,password:r};try{const o=await f(n);if(o.data&&o.data.accessToken)localStorage.setItem("accessToken",o.data.accessToken);else throw new Error("No access token received.");if(o.data){const{accessToken:u,...i}=o.data;localStorage.setItem("user",JSON.stringify(i))}else console.warn("No user data received from login response.");localStorage.setItem("apiKey",l),alert("Login successful!"),window.location.href="/"}catch(o){console.error("Login error:",o),alert(`Login failed: ${o.message}`)}finally{t.disabled=!1,t.textContent="Login"}}const g=document.forms.login;g.addEventListener("submit",m);
